"use strict";(self.webpackChunknotebook_sncf_p_3=self.webpackChunknotebook_sncf_p_3||[]).push([[312],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(n),m=r,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||i;return n?a.createElement(g,o(o({ref:t},c),{},{components:n})):a.createElement(g,o({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p[u]="string"==typeof e?e:r,o[1]=p;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},11:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>p,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:3},o="Partie 3 - Gestion des donn\xe9es",p={unversionedId:"front-end/angular/demarrer/manage-data",id:"front-end/angular/demarrer/manage-data",title:"Partie 3 - Gestion des donn\xe9es",description:"Cette \xe9tape du tutoriel vous guide dans la cr\xe9ation d'un panier d'achat en suivant les phases suivantes :",source:"@site/docs/3-front-end/angular/demarrer/3_manage-data.md",sourceDirName:"3-front-end/angular/demarrer",slug:"/front-end/angular/demarrer/manage-data",permalink:"/notebook-SNCF-P3/docs/front-end/angular/demarrer/manage-data",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/3-front-end/angular/demarrer/3_manage-data.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Partie 2 - Ajouter la navigation",permalink:"/notebook-SNCF-P3/docs/front-end/angular/demarrer/navigation"},next:{title:"Partie 4 - Les formulaires pour la saisie des donn\xe9es par l'utilisateur",permalink:"/notebook-SNCF-P3/docs/front-end/angular/demarrer/form-user-input"}},l={},s=[{value:"Cr\xe9er le service de panier d&#39;achat",id:"cr\xe9er-le-service-de-panier-dachat",level:2},{value:"D\xe9finir un service de panier",id:"d\xe9finir-un-service-de-panier",level:3},{value:"Utiliser le service de panier",id:"utiliser-le-service-de-panier",level:3},{value:"Cr\xe9er la vue panier",id:"cr\xe9er-la-vue-panier",level:2},{value:"Configurer le composant panier",id:"configurer-le-composant-panier",level:3},{value:"Afficher les \xe9l\xe9ments du panier",id:"afficher-les-\xe9l\xe9ments-du-panier",level:3},{value:"R\xe9cup\xe9rer les prix d&#39;exp\xe9dition",id:"r\xe9cup\xe9rer-les-prix-dexp\xe9dition",level:2},{value:"Configurer AppModule pour utiliser HttpClient",id:"configurer-appmodule-pour-utiliser-httpclient",level:3},{value:"Configurer <code>CartService</code> pour utiliser <code>HttpClient</code>",id:"configurer-cartservice-pour-utiliser-httpclient",level:3},{value:"Configurez <code>CartService</code> pour obtenir les prix d&#39;exp\xe9dition",id:"configurez-cartservice-pour-obtenir-les-prix-dexp\xe9dition",level:3},{value:"Cr\xe9er un composant d&#39;exp\xe9dition",id:"cr\xe9er-un-composant-dexp\xe9dition",level:2},{value:"Configuration du CartService ShippingComponent pour utiliser CartService",id:"configuration-du-cartservice-shippingcomponent-pour-utiliser-cartservice",level:3},{value:"C&#39;est quoi la suite ?",id:"cest-quoi-la-suite-",level:2}],c={toc:s},u="wrapper";function d(e){let{components:t,...i}=e;return(0,r.kt)(u,(0,a.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"partie-3---gestion-des-donn\xe9es"},"Partie 3 - Gestion des donn\xe9es"),(0,r.kt)("p",null,"Cette \xe9tape du tutoriel vous guide dans la cr\xe9ation d'un panier d'achat en suivant les phases suivantes :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Mettre \xe0 jour la vue des d\xe9tails du produit pour inclure un bouton Acheter , qui ajoute le produit actuel \xe0 une liste de produits g\xe9r\xe9s par un service de panier"),(0,r.kt)("li",{parentName:"ul"},"Ajoutez un composant de panier,qui affiche les articles dans le panier."),(0,r.kt)("li",{parentName:"ul"},"Ajoutez un composant d'exp\xe9dition, qui r\xe9cup\xe8re les prix d'exp\xe9dition pour les articles dans le panier en utilisant ",(0,r.kt)("inlineCode",{parentName:"li"},"HttpClient")," d'Angular pour r\xe9cup\xe9rer les donn\xe9es d'exp\xe9dition \xe0 partir d'un fichier ",(0,r.kt)("inlineCode",{parentName:"li"},".json"))),(0,r.kt)("h2",{id:"cr\xe9er-le-service-de-panier-dachat"},"Cr\xe9er le service de panier d'achat"),(0,r.kt)("p",null,"Dans Angular, un service est une instance d'une classe que vous pouvez mettre \xe0 la disposition de n'importe quelle partie de votre application \xe0 l'aide du syst\xe8me d'injection de d\xe9pendances d'Angular."),(0,r.kt)("p",null,"Actuellement,les utilisateurs peuvent consulter des informations sur les produits,et l'application peut simuler le partage et les notifications concernant les changements de produits."),(0,r.kt)("p",null,"L'\xe9tape suivante consiste \xe0 cr\xe9er un moyen pour les utilisateurs d'ajouter des produits \xe0 un panier. Cette section vous guide \xe0 travers l'ajout d'un bouton Acheter et la configuration d'un service de panier pour stocker des informations sur les produits dans le panier."),(0,r.kt)("h3",{id:"d\xe9finir-un-service-de-panier"},"D\xe9finir un service de panier"),(0,r.kt)("p",null,"Cette section vous CartService dans la cr\xe9ation du CartService qui suit les produits ajout\xe9s au panier."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Dans le terminal, g\xe9n\xe9rez un nouveau service de cart en ex\xe9cutant la commande suivante :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title=Terminal"',title:'Terminal"'},"ng generate service cart\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Importez l' interface ",(0,r.kt)("inlineCode",{parentName:"li"},"Product")," de ",(0,r.kt)("inlineCode",{parentName:"li"},"./products.ts")," dans le fichier ",(0,r.kt)("inlineCode",{parentName:"li"},"cart.service.ts")," et dans la classe ",(0,r.kt)("inlineCode",{parentName:"li"},"CartService"),", d\xe9finissez une propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"li"},"items")," pour stocker le tableau des produits actuels dans le panier.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title=src/app/cart.service.ts"',title:'src/app/cart.service.ts"'},'import { Product } from "./products";\nimport { Injectable } from "@angular/core";\n/* . . . */\n@Injectable({\n  providedIn: "root",\n})\nexport class CartService {\n  items: Product[] = [];\n  /* . . . */\n}\n')),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"D\xe9finissez des m\xe9thodes pour ajouter des articles au panier, renvoyer les articles du panier et effacer les articles du panier.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title=src/app/cart.service.ts"',title:'src/app/cart.service.ts"'},'@Injectable({\n  providedIn: "root",\n})\nexport class CartService {\n  items: Product[] = [];\n  /* . . . */\n\n  addToCart(product: Product) {\n    this.items.push(product);\n  }\n\n  getItems() {\n    return this.items;\n  }\n\n  clearCart() {\n    this.items = [];\n    return this.items;\n  }\n  /* . . . */\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"La m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"addToCart()")," ajoute un produit \xe0 un tableau d'",(0,r.kt)("inlineCode",{parentName:"li"},"items")),(0,r.kt)("li",{parentName:"ul"},"La m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"getItems()")," collecte les articles que les utilisateurs ajoutent au panier et renvoie chaque article avec sa quantit\xe9 associ\xe9e"),(0,r.kt)("li",{parentName:"ul"},"La m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"clearCart()")," renvoie un tableau vide d'\xe9l\xe9ments, qui vide le panier")),(0,r.kt)("h3",{id:"utiliser-le-service-de-panier"},"Utiliser le service de panier"),(0,r.kt)("p",null,"Cette section vous aide \xe0 utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"CartService")," pour ajouter un produit au panier."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"product-details.component.ts"),", importez le service de panier.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/product-details/product-details.component.ts",title:"src/app/product-details/product-details.component.ts"},'import { Component, OnInit } from "@angular/core";\nimport { ActivatedRoute } from "@angular/router";\n\nimport { Product, products } from "../products";\nimport { CartService } from "../cart.service";\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Injectez le service cart en l'ajoutant au ",(0,r.kt)("inlineCode",{parentName:"li"},"constructor()"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/product-details/product-details.component.ts",title:"src/app/product-details/product-details.component.ts"},"export class ProductDetailsComponent implements OnInit {\n  constructor(\n    private route: ActivatedRoute,\n    private cartService: CartService\n  ) {}\n}\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"D\xe9finissez la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"addToCart()"),", qui ajoute le produit actuel au panier.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/product-details/product-details.component.ts",title:"src/app/product-details/product-details.component.ts"},'export class ProductDetailsComponent implements OnInit {\n  /* . . . */\n  addToCart(product: Product) {\n    this.cartService.addToCart(product);\n    window.alert("Votre produit a \xe9t\xe9 ajout\xe9 au panier!");\n  }\n}\n')),(0,r.kt)("p",null,"La m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"addToCart()")," effectue les op\xe9rations suivantes :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Prend le product courant comme argument"),(0,r.kt)("li",{parentName:"ul"},"Utilise la CartService ",(0,r.kt)("inlineCode",{parentName:"li"},"addToCart()")," pour ajouter le produit au panier"),(0,r.kt)("li",{parentName:"ul"},"Affiche un message indiquant que vous avez ajout\xe9 un produit au panier.")),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"product-details.component.html"),", ajoutez un bouton avec le texte ",(0,r.kt)("strong",{parentName:"li"},"Acheter")," et liez l'\xe9v\xe9nement ",(0,r.kt)("inlineCode",{parentName:"li"},"click()")," \xe0 la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"addToCart()"),". Ce code met \xe0 jour le mod\xe8le de d\xe9tails du produit avec un bouton ",(0,r.kt)("strong",{parentName:"li"},"Acheter")," qui ajoute le produit actuel au panier.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=src/app/product-details/product-details.component.html",title:"src/app/product-details/product-details.component.html"},'<h2>D\xe9tails du produit</h2>\n\n<div *ngIf="product">\n  <h3>{{ product.name }}</h3>\n  <h4>{{ product.price | currency }}</h4>\n  <p>{{ product.description }}</p>\n  <button type="button" (click)="addToCart(product)">Acheter</button>\n</div>\n')),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"V\xe9rifiez que le nouveau bouton ",(0,r.kt)("strong",{parentName:"li"},"Acheter")," appara\xeet comme pr\xe9vu en actualisant l'application et en cliquant sur le nom d'un produit pour afficher ses d\xe9tails.")),(0,r.kt)("div",{class:"container-img-50"},(0,r.kt)("img",{src:n(611).Z,alt:"Le bouton Acheter est ajout\xe9 \xe0 la page D\xe9tails"}),(0,r.kt)("figcaption",null,"Le bouton Acheter est ajout\xe9 \xe0 la page D\xe9tails")),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Cliquez sur le bouton Acheter pour ajouter le produit \xe0 la liste des articles stock\xe9s dans le panier et afficher un message de confirmation.")),(0,r.kt)("div",{class:"container-img-50"},(0,r.kt)("img",{src:n(3048).Z,alt:"Notification d'ajout du produit au panier"}),(0,r.kt)("figcaption",null,"Notification d'ajout du produit au panier")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"cr\xe9er-la-vue-panier"},"Cr\xe9er la vue panier"),(0,r.kt)("p",null,"Pour que les clients puissent voir leur panier,vous pouvez cr\xe9er la vue du panier en deux \xe9tapes :"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Cr\xe9ez un composant de panier et configurez le routage vers le nouveau composant."),(0,r.kt)("li",{parentName:"ol"},"Affichez les \xe9l\xe9ments du panier.")),(0,r.kt)("h3",{id:"configurer-le-composant-panier"},"Configurer le composant panier"),(0,r.kt)("p",null,"Pour cr\xe9er la vue du panier, suivez les m\xeames \xe9tapes que pour cr\xe9er le ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductDetailsComponent")," et configurer le routage pour le nouveau composant."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"G\xe9n\xe9rez un nouveau composant nomm\xe9 cart dans le terminal en ex\xe9cutant la commande suivante :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title=Terminal",title:"Terminal"},"ng generate component cart\n")),(0,r.kt)("p",null,"Cette commande g\xe9n\xe9rera le fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"cart.component.ts")," et ses fichiers de mod\xe8les et de styles associ\xe9s."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/cart/cart.component.ts",title:"src/app/cart/cart.component.ts"},'import { Component } from "@angular/core";\n\n@Component({\n  selector: "app-cart",\n  templateUrl: "./cart.component.html",\n  styleUrls: ["./cart.component.css"],\n})\nexport class CartComponent {}\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Notez que le ",(0,r.kt)("inlineCode",{parentName:"li"},"CartComponent")," nouvellement cr\xe9\xe9 est ajout\xe9 aux declarations du module dans ",(0,r.kt)("inlineCode",{parentName:"li"},"app.module.ts"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/app.module.ts",title:"src/app/app.module.ts"},"import { CartComponent } from './cart/cart.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    TopBarComponent,\n    ProductListComponent,\n    ProductAlertsComponent,\n    ProductDetailsComponent,\n    CartComponent,\n  ],\n  /* . . . */\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Toujours dans ",(0,r.kt)("inlineCode",{parentName:"li"},"app.module.ts"),", ajoutez une route pour le composant ",(0,r.kt)("inlineCode",{parentName:"li"},"CartComponent"),", avec un ",(0,r.kt)("inlineCode",{parentName:"li"},"path")," de ",(0,r.kt)("inlineCode",{parentName:"li"},"cart"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/app.module.ts",title:"src/app/app.module.ts"},"@NgModule({\n  imports: [\n    BrowserModule,\n    ReactiveFormsModule,\n    RouterModule.forRoot([\n      { path: '', component: ProductListComponent },\n      { path: 'products/:productId', component: ProductDetailsComponent },\n      { path: 'cart', component: CartComponent },\n    ])\n  ],\n  /* . . . */\n")),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Mettez \xe0 jour le bouton ",(0,r.kt)("strong",{parentName:"li"},"Paiement")," afin qu'il soit achemin\xe9 vers l'URL ",(0,r.kt)("inlineCode",{parentName:"li"},"/cart")," . Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"top-bar.component.html"),", ajoutez une directive ",(0,r.kt)("inlineCode",{parentName:"li"},"routerLink")," pointant vers ",(0,r.kt)("inlineCode",{parentName:"li"},"/cart"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=src/app/top-bar/top-bar.component.html",title:"src/app/top-bar/top-bar.component.html"},'<a routerLink="/cart" class="button fancy-button">\n  <i class="material-icons">shopping_cart</i>Paiement\n</a>\n')),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"V\xe9rifiez que le nouveau ",(0,r.kt)("inlineCode",{parentName:"li"},"CartComponent")," fonctionne comme pr\xe9vu en cliquant sur le bouton ",(0,r.kt)("strong",{parentName:"li"},"Paiement"),' . Vous pouvez voir le texte par d\xe9faut "cart works!", et l\'URL a le mod\xe8le (http://localhost:4200/cart)',"[http://localhost:4200/cart]",".")),(0,r.kt)("div",{class:"container-img-50"},(0,r.kt)("img",{src:n(2578).Z,alt:"Le composant panier fonctionne"}),(0,r.kt)("figcaption",null,"Le composant panier fonctionne")),(0,r.kt)("h3",{id:"afficher-les-\xe9l\xe9ments-du-panier"},"Afficher les \xe9l\xe9ments du panier"),(0,r.kt)("p",null,"Cette section vous montre comment utiliser le service de panier pour afficher les produits dans le panier."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"cart.component.ts")," , importez le ",(0,r.kt)("inlineCode",{parentName:"li"},"CartService")," \xe0 partir du fichier ",(0,r.kt)("inlineCode",{parentName:"li"},"cart.service.ts"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/cart/cart.component.ts",title:"src/app/cart/cart.component.ts"},'import { Component } from "@angular/core";\nimport { CartService } from "../cart.service";\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Injectez le CartService pour que le CartComponent puisse l'utiliser en l'ajoutant au constructor() .")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/cart/cart.component.ts",title:"src/app/cart/cart.component.ts"},"export class CartComponent {\n  constructor(private cartService: CartService) {}\n}\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"D\xe9finissez la propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"li"},"items")," pour stocker les produits dans le panier.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/cart/cart.component.ts",title:"src/app/cart/cart.component.ts"},"export class CartComponent {\n  items = this.cartService.getItems();\n\n  constructor(private cartService: CartService) {}\n}\n")),(0,r.kt)("p",null,"Ce code d\xe9finit les \xe9l\xe9ments \xe0 l'aide de la CartService getItems() . Vous avez d\xe9fini cette m\xe9thode lorsque vous avez cr\xe9\xe9 cart.service.ts ."),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Mettez \xe0 jour le mod\xe8le de panier avec une en-t\xeate et utilisez une ",(0,r.kt)("inlineCode",{parentName:"li"},"<div>")," avec un ",(0,r.kt)("inlineCode",{parentName:"li"},"*ngFor")," pour afficher chacun des articles du panier avec son nom et son prix. Le mod\xe8le ",(0,r.kt)("inlineCode",{parentName:"li"},"CartComponent")," r\xe9sultant est le suivant.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=src/app/cart/cart.component.html",title:"src/app/cart/cart.component.html"},'<h3>Panier</h3>\n\n<div class="cart-item" *ngFor="let item of items">\n  <span>{{ item.name }}</span>\n  <span>{{ item.price | currency }}</span>\n</div>\n')),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"V\xe9rifiez que votre panier fonctionne comme pr\xe9vu :",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Cliquez sur ",(0,r.kt)("strong",{parentName:"li"},"Mon magasin"),"."),(0,r.kt)("li",{parentName:"ul"},"Cliquez sur le nom d'un produit pour afficher ses d\xe9tails."),(0,r.kt)("li",{parentName:"ul"},"Cliquez sur ",(0,r.kt)("strong",{parentName:"li"},"Acheter")," pour ajouter le produit au panier."),(0,r.kt)("li",{parentName:"ul"},"Cliquez sur ",(0,r.kt)("strong",{parentName:"li"},"Paiement")," pour voir le panier.")))),(0,r.kt)("div",{class:"container-img-50"},(0,r.kt)("img",{src:n(1357).Z,alt:"Panier avec plein de produits"}),(0,r.kt)("figcaption",null,"Panier avec plein de produits")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"r\xe9cup\xe9rer-les-prix-dexp\xe9dition"},"R\xe9cup\xe9rer les prix d'exp\xe9dition"),(0,r.kt)("p",null,"Les serveurs renvoient souvent des donn\xe9es sous la forme d'un flux. Les flux sont utiles car ils facilitent la transformation des donn\xe9es renvoy\xe9es et la modification de la fa\xe7on dont vous demandez ces donn\xe9es. Angular HttpClient est un moyen int\xe9gr\xe9 de r\xe9cup\xe9rer des donn\xe9es \xe0 partir d'API externes et de les fournir \xe0 votre application sous forme de flux un peu comme la fonction ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"."),(0,r.kt)("p",null,"Cette section vous montre comment utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"HttpClient")," pour r\xe9cup\xe9rer les prix d'exp\xe9dition \xe0 partir d'un fichier externe."),(0,r.kt)("p",null,"L'application que vous construsez pour ce tuto est livr\xe9e avec des donn\xe9es d'exp\xe9dition pr\xe9d\xe9finies dans le fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"assets/shipping.json"),". Utilisez ces donn\xe9es pour ajouter les prix d'exp\xe9dition des articles dans le panier."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:"title=src/assets/shipping.json",title:"src/assets/shipping.json"},'[\n  {\n    "type": "De nuit",\n    "price": 25.99\n  },\n  {\n    "type": "Livraison 2 jours",\n    "price": 9.99\n  },\n  {\n    "type": "Voie postale",\n    "price": 2.99\n  }\n]\n')),(0,r.kt)("h3",{id:"configurer-appmodule-pour-utiliser-httpclient"},"Configurer AppModule pour utiliser HttpClient"),(0,r.kt)("p",null,"Pour utiliser le ",(0,r.kt)("inlineCode",{parentName:"p"},"HttpClient")," d'Angular, vous devez configurer votre application pour utiliser ",(0,r.kt)("inlineCode",{parentName:"p"},"HttpClientModule"),"."),(0,r.kt)("p",null,"Le ",(0,r.kt)("inlineCode",{parentName:"p"},"HttpClientModule")," d'Angular enregistre les fournisseurs dont votre application a besoin pour utiliser le service ",(0,r.kt)("inlineCode",{parentName:"p"},"HttpClient")," dans toute votre application."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"app.module.ts"),", importez ",(0,r.kt)("inlineCode",{parentName:"li"},"HttpClientModule")," \xe0 partir du package ",(0,r.kt)("inlineCode",{parentName:"li"},"@angular/common/http")," en haut du fichier avec les autres importations. Comme il existe un certain nombre d'autres importations, cet extrait de code les omet par souci de concision. Assurez-vous de laisser les importations existantes en place.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/app.module.ts",title:"src/app/app.module.ts"},'import { HttpClientModule } from "@angular/common/http";\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Pour enregistrer les fournisseurs ",(0,r.kt)("inlineCode",{parentName:"li"},"HttpClient")," d'Angular globalement (pour tout les composants de l'application), ajoutez ",(0,r.kt)("inlineCode",{parentName:"li"},"HttpClientModule")," au tableau d'",(0,r.kt)("inlineCode",{parentName:"li"},"imports"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/app.module.ts",title:"src/app/app.module.ts"},'@NgModule({\n  imports: [\n    BrowserModule,\n    HttpClientModule, // <- ICI\n    ReactiveFormsModule,\n    RouterModule.forRoot([\n      { path: "", component: ProductListComponent },\n      { path: "products/:productId", component: ProductDetailsComponent },\n      { path: "cart", component: CartComponent },\n    ]),\n  ],\n  declarations: [\n    AppComponent,\n    TopBarComponent,\n    ProductListComponent,\n    ProductAlertsComponent,\n    ProductDetailsComponent,\n    CartComponent,\n  ],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n')),(0,r.kt)("h3",{id:"configurer-cartservice-pour-utiliser-httpclient"},"Configurer ",(0,r.kt)("inlineCode",{parentName:"h3"},"CartService")," pour utiliser ",(0,r.kt)("inlineCode",{parentName:"h3"},"HttpClient")),(0,r.kt)("p",null,"L'\xe9tape suivante consiste \xe0 injecter le service ",(0,r.kt)("inlineCode",{parentName:"p"},"HttpClient")," dans votre service afin que votre application puisse r\xe9cup\xe9rer des donn\xe9es et interagir avec des API et des ressources externes."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"cart.service.ts"),", importez ",(0,r.kt)("inlineCode",{parentName:"li"},"HttpClient")," \xe0 partir du package ",(0,r.kt)("inlineCode",{parentName:"li"},"@angular/common/http"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/cart/cart.service.ts",title:"src/app/cart/cart.service.ts"},'import { Injectable } from "@angular/core";\nimport { HttpClient } from "@angular/common/http";\nimport { Product } from "./products";\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Injectez HttpClient dans le ",(0,r.kt)("inlineCode",{parentName:"li"},"constructor()")," de ",(0,r.kt)("inlineCode",{parentName:"li"},"CartService")," .")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/cart/cart.service.ts",title:"src/app/cart/cart.service.ts"},"export class CartService {\n  items: Product[] = [];\n\n  constructor(private http: HttpClient) {}\n  /* . . . */\n}\n")),(0,r.kt)("h3",{id:"configurez-cartservice-pour-obtenir-les-prix-dexp\xe9dition"},"Configurez ",(0,r.kt)("inlineCode",{parentName:"h3"},"CartService")," pour obtenir les prix d'exp\xe9dition"),(0,r.kt)("p",null,"Pour obtenir les donn\xe9es d'exp\xe9dition, \xe0 partir de ",(0,r.kt)("inlineCode",{parentName:"p"},"shipping.json"),", vous pouvez utiliser la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"p"},"get()")," de ",(0,r.kt)("inlineCode",{parentName:"p"},"HttpClient"),"."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"cart.service.ts"),", sous la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"clearCart()"),", d\xe9finissez une nouvelle m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"getShippingPrices()")," qui utilise la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"get()")," de ",(0,r.kt)("inlineCode",{parentName:"li"},"HttpClient"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/cart/cart.service.ts",title:"src/app/cart/cart.service.ts"},'export class CartService {\n  /* . . . */\n  getShippingPrices() {\n    return this.http.get<{ type: string; price: number }[]>(\n      "/assets/shipping.json"\n    );\n  }\n}\n')),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"cr\xe9er-un-composant-dexp\xe9dition"},"Cr\xe9er un composant d'exp\xe9dition"),(0,r.kt)("p",null,"Maintenant que vous avez configur\xe9 votre application pour r\xe9cup\xe9rer les donn\xe9es d'exp\xe9dition,vous pouvez cr\xe9er un endroit pour afficher ces donn\xe9es."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"G\xe9n\xe9rez un composant de panier nomm\xe9 shipping dans le terminal en ex\xe9cutant la commande suivante :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"title=Terminal",title:"Terminal"},"ng generate component shipping\n")),(0,r.kt)("p",null,"Cette commande g\xe9n\xe9rera le fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"shipping.component.ts")," et les fichiers de mod\xe8les et de styles associ\xe9s."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/shipping/shipping.component.ts",title:"src/app/shipping/shipping.component.ts"},'import { Component } from "@angular/core";\n\n@Component({\n  selector: "app-shipping",\n  templateUrl: "./shipping.component.html",\n  styleUrls: ["./shipping.component.css"],\n})\nexport class ShippingComponent {}\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"app.module.ts"),", ajoutez une route pour l'exp\xe9dition. Sp\xe9cifiez un path ",(0,r.kt)("inlineCode",{parentName:"li"},"shipping")," et un composant de ",(0,r.kt)("inlineCode",{parentName:"li"},"ShippingComponent"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/app.module.ts",title:"src/app/app.module.ts"},'@NgModule({\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    ReactiveFormsModule,\n    RouterModule.forRoot([\n      { path: "", component: ProductListComponent },\n      { path: "products/:productId", component: ProductDetailsComponent },\n      { path: "cart", component: CartComponent },\n      { path: "shipping", component: ShippingComponent },\n    ]),\n  ],\n  declarations: [\n    AppComponent,\n    TopBarComponent,\n    ProductListComponent,\n    ProductAlertsComponent,\n    ProductDetailsComponent,\n    CartComponent,\n    ShippingComponent,\n  ],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n')),(0,r.kt)("p",null,"Il n'y a pas encore de lien vers le nouveau composant d'exp\xe9dition, mais vous pouvez visionner ce composanten entrant l'URL sp\xe9cifi\xe9e par sa route. L'URL d'affichage de ce composant est : ",(0,r.kt)("a",{parentName:"p",href:"http://localhost:4200/shipping"},"http://localhost:4200/shipping"),"."),(0,r.kt)("h3",{id:"configuration-du-cartservice-shippingcomponent-pour-utiliser-cartservice"},"Configuration du CartService ShippingComponent pour utiliser CartService"),(0,r.kt)("p",null,"Cette section vous guide dans la modification de ShippingComponent pour r\xe9cup\xe9rer les donn\xe9es d'exp\xe9dition via HTTP \xe0 partir du fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"shipping.json"),"."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"shipping.component.ts"),", importez ",(0,r.kt)("inlineCode",{parentName:"li"},"CartService"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/shipping/shipping.component.ts",title:"src/app/shipping/shipping.component.ts"},'import { Component, OnInit } from "@angular/core";\n\nimport { Observable } from "rxjs";\nimport { CartService } from "../cart.service";\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Injectez le service cart dans le constructor() ShippingComponent () .")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/shipping/shipping.component.ts",title:"src/app/shipping/shipping.component.ts"},"/* . . . */\n  constructor(private cartService: CartService) { }\n/* . . . */\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"D\xe9finissez une propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"li"},"shippingCosts")," dont la valeur sera initialis\xe9e \xe0 l'aide de la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"getShippingPrices()")," de ",(0,r.kt)("inlineCode",{parentName:"li"},"CartService"),". Initialisez la propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"li"},"shippingCosts")," dans la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"ngOnInit()"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=src/app/shipping/shipping.component.ts",title:"src/app/shipping/shipping.component.ts"},"export class ShippingComponent implements OnInit {\n  shippingCosts!: Observable<{ type: string; price: number }[]>;\n\n  constructor(private cartService: CartService) {}\n\n  ngOnInit(): void {\n    this.shippingCosts = this.cartService.getShippingPrices();\n  }\n}\n")),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Mettez \xe0 jour le mod\xe8le ",(0,r.kt)("inlineCode",{parentName:"li"},"ShippingComponent")," pour afficher les types d'exp\xe9dition et les prix \xe0 l'aide d'une pipe ",(0,r.kt)("inlineCode",{parentName:"li"},"async"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=src/app/shipping/shipping.component.html",title:"src/app/shipping/shipping.component.html"},'<h3>Prix d\'exp\xe9dition</h3>\n\n<div class="shipping-item" *ngFor="let shipping of shippingCosts | async">\n  <span>{{ shipping.type }}</span>\n  <span>{{ shipping.price | currency }}</span>\n</div>\n')),(0,r.kt)("p",null,"La pipe async renvoie la derni\xe8re valeur d'un flux de donn\xe9es et continue de le faire pendant toute la dur\xe9e de vie d'un composant donn\xe9. Lorsque Angular d\xe9truit ce composant, la canal ",(0,r.kt)("inlineCode",{parentName:"p"},"async")," s'arr\xeate automatiquement."),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"Ajoutez un lien de la vue ",(0,r.kt)("inlineCode",{parentName:"li"},"ShippingComponent")," dans la page ",(0,r.kt)("inlineCode",{parentName:"li"},"CartComponent")," .")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=src/app/cart/cart.component.hmtl",title:"src/app/cart/cart.component.hmtl"},'<h3>Panier</h3>\n\n<p>\n  <a routerLink="/shipping">Prix d\'exp\xe9dition</a>\n</p>\n\n<div class="cart-item" *ngFor="let item of items">\n  <span>{{ item.name }}</span>\n  <span>{{ item.price | currency }}</span>\n</div>\n')),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Cliquez sur le bouton ",(0,r.kt)("strong",{parentName:"li"},"Paiement")," pour voir le panier mis \xe0 jour. N'oubliez pas que changer l'application provoque l'actualisation de l'aper\xe7u, ce qui vide le panier.")),(0,r.kt)("div",{class:"container-img-50"},(0,r.kt)("img",{src:n(9341).Z,alt:"Ajout du lien de la page Prix d'Exp\xe9dition"}),(0,r.kt)("figcaption",null,"Ajout du lien de la page Prix d'Exp\xe9dition")),(0,r.kt)("ol",{start:7},(0,r.kt)("li",{parentName:"ol"},"Cliquez sur le lien pour acc\xe9der aux prix d'exp\xe9dition.")),(0,r.kt)("div",{class:"container-img-50"},(0,r.kt)("img",{src:n(3576).Z,alt:"Liste des Prix d'exp\xe9dition"}),(0,r.kt)("figcaption",null,"Liste des Prix d'exp\xe9dition")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"cest-quoi-la-suite-"},"C'est quoi la suite ?"),(0,r.kt)("p",null,"Vous disposez maintenant d'une application de magasin avec un catalogue de produits,un panier d'achat et vous pouvez consulter les prix d'exp\xe9dition."),(0,r.kt)("p",null,"Pour continuer \xe0 explorer Angular :"),(0,r.kt)("p",null,"Continuez vers Formulaires pour la saisie de l'utilisateur pour terminer l'application en ajoutant la vue du panier et un formulaire de paiement."))}d.isMDXComponent=!0},1357:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/cart-full-d8240ecefc52f5196f5419acba98bc54.png"},9341:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/cart-shipping-link-added-f93de4a86c5502220372bee0ce7046c7.png"},2578:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/cart-works-5402f362882c8233fa1fe49a603a04c9.png"},3048:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/notify-product-add-cart-ddd8d43de2f51f297f902b44b4e8be33.png"},611:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/product-details-with-buy-btn-90f583a8d6d05c563add43268faa3a32.png"},3576:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/shipping-price-b64fda6a6cb65dba66b57b3b0e153823.png"}}]);