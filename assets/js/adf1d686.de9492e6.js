"use strict";(self.webpackChunknotebook_sncf_p_3=self.webpackChunknotebook_sncf_p_3||[]).push([[678],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>f});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),u=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=u(e.components);return o.createElement(p.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,f=d["".concat(p,".").concat(m)]||d[m]||c[m]||a;return n?o.createElement(f,i(i({ref:t},s),{},{components:n})):o.createElement(f,i({ref:t},s))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var u=2;u<a;u++)i[u]=n[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1017:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>u});var o=n(7462),r=(n(7294),n(3905));const a={sidebar_position:3},i="Partie 2 - Ajouter la navigation",l={unversionedId:"front-end/angular/navigation",id:"front-end/angular/navigation",title:"Partie 2 - Ajouter la navigation",description:"Associer un chemin URL \xe0 un composant",source:"@site/docs/3-front-end/angular/2_navigation.md",sourceDirName:"3-front-end/angular",slug:"/front-end/angular/navigation",permalink:"/notebook-SNCF-P3/docs/front-end/angular/navigation",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/3-front-end/angular/2_navigation.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Partie 1 - G\xe9rer les donn\xe9es avec des composants",permalink:"/notebook-SNCF-P3/docs/front-end/angular/product-list"},next:{title:"Partie 3 - Gestion des donn\xe9es",permalink:"/notebook-SNCF-P3/docs/front-end/angular/manage-data"}},p={},u=[{value:"Associer un chemin URL \xe0 un composant",id:"associer-un-chemin-url-\xe0-un-composant",level:2},{value:"Voir les d\xe9tails du produit",id:"voir-les-d\xe9tails-du-produit",level:2},{value:"C&#39;est quoi la suite ?",id:"cest-quoi-la-suite-",level:2}],s={toc:u},d="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,o.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"partie-2---ajouter-la-navigation"},"Partie 2 - Ajouter la navigation"),(0,r.kt)("h2",{id:"associer-un-chemin-url-\xe0-un-composant"},"Associer un chemin URL \xe0 un composant"),(0,r.kt)("p",null,"L'application utilise d\xe9j\xe0 le Router Angular pour acc\xe9der au ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductListComponent")," . Cette section vous montre comment d\xe9finir une route pour afficher les d\xe9tails d'un seul produit."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"G\xe9n\xe9rez un nouveau composant pour les d\xe9tails du produit. Dans le terminal, g\xe9n\xe9rez un nouveau composant ",(0,r.kt)("inlineCode",{parentName:"li"},"product-details")," en ex\xe9cutant la commande suivante :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title=Terminal"',title:'Terminal"'},"ng generate component product-details\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"app.module.ts"),", ajoutez une route pour les d\xe9tails du produit, avec un path de ",(0,r.kt)("inlineCode",{parentName:"li"},"products/:productId")," et ",(0,r.kt)("inlineCode",{parentName:"li"},"ProductDetailsComponent")," pour le component .")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title=src/app/app.module.ts"',title:'src/app/app.module.ts"'},'@NgModule({\n  imports: [\n    BrowserModule,\n    ReactiveFormsModule,\n    RouterModule.forRoot([\n      { path: "", component: ProductListComponent },\n      { path: "products/:productId", component: ProductDetailsComponent },\n    ]),\n  ],\n  declarations: [\n    AppComponent,\n    TopBarComponent,\n    ProductListComponent,\n    ProductAlertsComponent,\n    ProductDetailsComponent,\n  ],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n')),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Ouvrez product-list.component.html.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Modifiez l'ancre de nom de produit pour inclure un ",(0,r.kt)("inlineCode",{parentName:"p"},"routerLink")," avec le ",(0,r.kt)("inlineCode",{parentName:"p"},"product.id")," comme param\xe8tre."))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title=src/app/product-list/product-list.component.html"',title:'src/app/product-list/product-list.component.html"'},'<div *ngFor="let product of products">\n  <h3>\n    <a\n      [title]="\'Details du \' + product.name"\n      [routerLink]="[\'/products\', product.id]"\n    >\n      {{ product.name }}\n    </a>\n  </h3>\n\n  \x3c!-- . . . --\x3e\n</div>\n')),(0,r.kt)("p",null,"La directive ",(0,r.kt)("inlineCode",{parentName:"p"},"RouterLink")," vous aide \xe0 personnaliser l'\xe9l\xe9ment d'ancrage. Dans ce cas, la route, ou URL, contient un segment fixe, ",(0,r.kt)("inlineCode",{parentName:"p"},"/products")," . Le segment final est variable, ins\xe9rant la propri\xe9t\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," du produit actuel. Par exemple, l'URL d'un produit avec un ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," de 1 sera donc ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:4200/products/1"),"."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"V\xe9rifiez que le routeur fonctionne comme pr\xe9vu en cliquant sur le nom du produit. L'application doit afficher le ",(0,r.kt)("inlineCode",{parentName:"li"},"ProductDetailsComponent"),' , qui indique actuellement "product-details works!"')),(0,r.kt)("p",null,"Notez que l'URL dans la fen\xeatre d'aper\xe7u change. Le segment final est ",(0,r.kt)("inlineCode",{parentName:"p"},"products/#")," o\xf9 ",(0,r.kt)("inlineCode",{parentName:"p"},"#")," est le num\xe9ro de l'itin\xe9raire sur lequel vous avez cliqu\xe9."),(0,r.kt)("div",{class:"container-img-50"},(0,r.kt)("img",{src:n(4820).Z,alt:"Affichage de la page http://localhost:4200/products/1"}),(0,r.kt)("figcaption",null,"Affichage de la page http://localhost:4200/products/1")),(0,r.kt)("h2",{id:"voir-les-d\xe9tails-du-produit"},"Voir les d\xe9tails du produit"),(0,r.kt)("p",null,"Le ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductDetailsComponent")," g\xe8re l'affichage de chaque produit. Le routeur Angular affiche les composants en fonction de l'URL du navigateur et de vos routes d\xe9finis ."),(0,r.kt)("p",null,"Dans cette section, vous utiliserez le routeur Angular pour combiner les donn\xe9es des ",(0,r.kt)("inlineCode",{parentName:"p"},"products")," et les informations de route afin d'afficher les d\xe9tails sp\xe9cifiques de chaque produit."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Dans ",(0,r.kt)("inlineCode",{parentName:"li"},"product-details.component.ts")," , importez ",(0,r.kt)("inlineCode",{parentName:"li"},"ActivatedRoute")," depuis ",(0,r.kt)("inlineCode",{parentName:"li"},"@angular/router")," et le tableau ",(0,r.kt)("inlineCode",{parentName:"li"},"products")," depuis ",(0,r.kt)("inlineCode",{parentName:"li"},"../products"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title='src/app/product-details/product-details.component.ts'",title:"'src/app/product-details/product-details.component.ts'"},'import { Component, OnInit } from "@angular/core";\nimport { ActivatedRoute } from "@angular/router";\n\nimport { Product, products } from "../products";\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"D\xe9finissez la propri\xe9t\xe9 du ",(0,r.kt)("inlineCode",{parentName:"li"},"product"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title='src/app/product-details/product-details.component.ts'",title:"'src/app/product-details/product-details.component.ts'"},"export class ProductDetailsComponent implements OnInit {\n\nproduct: Product | undefined;\n/_ ... _/\n}\n\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Injectez ",(0,r.kt)("inlineCode",{parentName:"li"},"ActivatedRoute")," dans le ",(0,r.kt)("inlineCode",{parentName:"li"},"constructor()")," en ajoutant ",(0,r.kt)("inlineCode",{parentName:"li"},"private route: ActivatedRoute")," comme argument entre les parenth\xe8ses du constructeur.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title='src/app/product-details/product-details.component.ts'",title:"'src/app/product-details/product-details.component.ts'"},"export class ProductDetailsComponent implements OnInit {\n  product: Product | undefined;\n\n  constructor(private route: ActivatedRoute) {}\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ActivatedRoute")," est sp\xe9cifique \xe0 chaque composant charg\xe9 par le routeur Angular. ",(0,r.kt)("inlineCode",{parentName:"p"},"ActivatedRoute")," contient des informations sur la route et les param\xe8tres de la route."),(0,r.kt)("p",null,"En injectant ",(0,r.kt)("inlineCode",{parentName:"p"},"ActivatedRoute"),", vous configurez le composant pour utiliser un service. La prochaine \xe9tape (Gestion des donn\xe9es) couvre les services plus en d\xe9tail."),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Dans la m\xe9thode ",(0,r.kt)("inlineCode",{parentName:"li"},"ngOnInit()"),", extrayez le ",(0,r.kt)("inlineCode",{parentName:"li"},"productId")," des param\xe8tres de route et recherchez le produit correspondant dans le tableau ",(0,r.kt)("inlineCode",{parentName:"li"},"products"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title='src/app/product-details/product-details.component.ts'",title:"'src/app/product-details/product-details.component.ts'"},"ngOnInit() {\n// R\xe9cup\xe8re d'abord l'identifiant du produit de la route actuelle.\nconst routeParams = this.route.snapshot.paramMap;\nconst productIdFromRoute = Number(routeParams.get('productId'));\n\n// Trouver le produit qui correspond \xe0 l'identifiant fourni dans route.\nthis.product = products.find(product => product.id === productIdFromRoute);\n}\n")),(0,r.kt)("p",null,"Les param\xe8tres de route correspondent aux variables de chemin que vous d\xe9finissez dans la route. Pour acc\xe9der aux param\xe8tres de la route, nous utilisons ",(0,r.kt)("inlineCode",{parentName:"p"},"route.snapshot"),", qui est ",(0,r.kt)("inlineCode",{parentName:"p"},"ActivatedRouteSnapshot")," qui contient des informations sur la route active \xe0 ce moment particulier. L'URL qui correspond \xe0 l'itin\xe9raire fournit le ",(0,r.kt)("inlineCode",{parentName:"p"},"productId"),". Angular utilise le ",(0,r.kt)("inlineCode",{parentName:"p"},"productId")," pour afficher les d\xe9tails de chaque produit unique."),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"Mettez \xe0 jour le mod\xe8le ",(0,r.kt)("inlineCode",{parentName:"li"},"ProductDetailsComponent")," pour afficher les d\xe9tails du produit avec un ",(0,r.kt)("inlineCode",{parentName:"li"},"*ngIf"),". Si un produit existe, le ",(0,r.kt)("inlineCode",{parentName:"li"},"<div>")," s'affiche avec un nom, un prix et une description.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:"title='src/app/product-details/product-details.component.html'",title:"'src/app/product-details/product-details.component.html'"},'<h2>D\xe9tails du produit</h2>\n\n<div *ngIf="product">\n  <h3>{{ product.name }}</h3>\n  <h4>{{ product.price | currency }}</h4>\n  <p>{{ product.description }}</p>\n</div>\n')),(0,r.kt)("p",null,"La ligne,\n",(0,r.kt)("inlineCode",{parentName:"p"},"<h4>{{ product.price | currency }}</h4>"),", utilise une pipe (prononcez ",(0,r.kt)("inlineCode",{parentName:"p"},"pa\xefpe")," \ud83d\ude09) de currency pour transformer ",(0,r.kt)("inlineCode",{parentName:"p"},"product.price")," d'un nombre en une cha\xeene de devise."),(0,r.kt)("p",null,"Une pipe est un moyen de transformer des donn\xe9es dans votre\nmod\xe8le HTML. Lorsque les utilisateurs cliquent sur un nom dans la liste desproduits, le routeur les ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductDetailsComponent")," vers l'URL distincte du produit, affiche le ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductDetailsComponent")," et affiche les d\xe9tails du produit."),(0,r.kt)("div",{class:"container-img-50"},(0,r.kt)("img",{src:n(4554).Z,alt:"D\xe9tails du produit de la page http://localhost:4200/products/1"}),(0,r.kt)("figcaption",null,"D\xe9tails du produit de la page http://localhost:4200/products/1")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"cest-quoi-la-suite-"},"C'est quoi la suite ?"),(0,r.kt)("p",null,"Vous avez configur\xe9 votre application de mani\xe8re \xe0 pouvoir afficher les d\xe9tails des produits, chacun ayant une URL distincte et ceci de mani\xe8re compl\xe8tement dynamique : ici nous avons 3 produits mais cela fonctionne si nous en avions 1 000 ."),(0,r.kt)("p",null,"Dans la prochaine section vous allez ajouter une fonctionnalit\xe9 de panier d'achat, g\xe9rer les donn\xe9es du panier et r\xe9cup\xe9rer des donn\xe9es externes pour les prix d'exp\xe9dition."))}c.isMDXComponent=!0},4554:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/product-details-057c6fdc0c75a2b8f5580a1763b93434.png"},4820:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/products-details-works-706f92354c155c2e9c37e9661d0c5040.png"}}]);